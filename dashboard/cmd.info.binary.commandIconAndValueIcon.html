<!-- Info Widget Jeedom
  Jeedom Compatibility: v4
  Version: Dashboard
  Type: Info
  SubType: Binary
  Name: cmd.info.binary.commandIconAndValueIcon.html
  Comment: Show command icon + value icon + [time value (optional)]
  Parameter: timeWidget (on/off) - default on
  Date: 2020-04-08
  Source: https://github.com/Heliospeed/jeedom_widget_v4/
-->
<div class="cmd cmd-widget cursor #history#" data-type="info" data-subtype="binary" data-template="tmplicon" data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#">
  <div class="title #hide_name#">
    <div class="cmdName">#name_display#</div>
  </div>
  <div class="content-sm">
    <span class="iconCmd"></span>
  </div>
  <div class="value">
    <span class="timeCmd#uid# timeCmd label label-default value"></span>
  </div>
</div>
<script>
  jeedom.cmd.update['#id#'] = function(_options){
    var cmd = $('.cmd[data-cmd_id=#id#]');
    var timeWidget 	= ('#timeWidget#'!='#'+'timeWidget#') ? "#timeWidget#" : "on";
    
    cmd.find('.title').find('i.icon').css('font-size','3em');
    
    // Affichage du delais de changement de valeur
    if (timeWidget == 'on'){
      jeedom.cmd.displayDuration(_options.valueDate,  cmd.find('.timeCmd'));
    }
  	else{
      cmd.find('.timeCmd').empty();
    }
    
    cmd.attr('title','Date de valeur : '+_options.valueDate+'<br/>Date de collecte : '+_options.collectDate)
    
    if (_options.display_value == '1') {
      cmd.find('.iconCmd').empty().append("<i class='fas fa-circle' style='font-size: 12px !important;'></i>");
    }
    else {
      cmd.find('.iconCmd').empty().append("<i class='far fa-circle' style='font-size: 12px !important;'></i>");
    }
  }
  jeedom.cmd.update['#id#']({display_value:'#state#',valueDate:'#valueDate#',collectDate:'#collectDate#',alertLevel:'#alertLevel#'});
</script>